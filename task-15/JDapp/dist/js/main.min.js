var app=angular.module("ionicApp",["ionic"]);app.controller("myCtrl",function(t,e){function a(t){var e=$("ion-list"),a=$("<ion-item></ion-item>").prependTo(e),o=$("<div></div>").addClass("goods").appendTo(a),i=$("<div></div>").addClass("icon-select").appendTo(o),n=($("<ion-checkbox></ion-checkbox>").attr("ng-checked","true").addClass("checkbox-balanced icon-select--middle").appendTo(i),$("<a></a>").appendTo(o)),d=$("<div></div>").addClass("goods__img").appendTo(n),l=($("<img>").attr("src",t.imgSrc).appendTo(d),$("<div></div>").addClass("goods__content").appendTo(n)),c=($("<div></div>").addClass("goods__c__name").html(t.text).appendTo(l),$("<div></div>").addClass("price goods--tiaozhen").html("￥").appendTo(l)),s=($("<em></em>").html(t.price.whole).appendTo(c),$("<span></span>").text(t.price.smallNum).appendTo(c),$("<i></i>").addClass("heavy").html(t.heavy).appendTo(c),$("<div ng-app=''></div>").addClass("goods__count").appendTo(l));$("<span ng-click='subtract(item.id)'></span>").addClass("minus").appendTo(s),$("<input>").attr({type:"text",value:t.quantity,"data-ng-model":t.quantity}).addClass("num").appendTo(s),$("<span ng-model='add(item.id)'></span>").addClass("plus").appendTo(s),$("<ion-option-button> </ion-option-button>").addClass("button-assertive").html("删除").appendTo(a),$("<ion-option-button> </ion-option-button>").addClass("button-dark").html("移至收藏").appendTo(a)}function o(e){$("div.shop-car").attr("style").length>14&&($(".header").show(),$(".jingdong").show(),$("div.shop-car").hide(),t.footerHide=!t.footerHide),i+=Number(e.price.whole+e.price.smallNum),t.calculate=i.toFixed(2)}t.goods=[{id:0,nanme:"纯甄",imgSrc:"https://img14.360buyimg.com/n7/jfs/t5491/66/891749162/97934/646347e1/5908a5d4Nf29aa00e.jpg",text:"【京东超市】【24盒装】蒙牛 纯甄 常温酸牛奶 200g*24 家庭装",heavy:"5.580kg/件",quantity:1,price:{whole:93,smallNum:".00"}},{id:1,nanme:"三只松鼠",imgSrc:"https://img14.360buyimg.com/n7/jfs/t5632/35/1522518407/267776/3cfbd4e2/5927cd46N8fcdb71a.jpg",text:"三只松鼠_开口松子218gx2袋零食坚果特产炒货东北红松子原味",heavy:"500g/袋",quantity:1,price:{whole:49,smallNum:".90"}},{id:2,nanme:"360随身wifi",imgSrc:"https://img14.360buyimg.com/n7/jfs/t478/153/886206867/83918/24d11d17/54b8ae03N63a25d6c.jpg",text:"360随身WiFi3 300M 无线网卡 迷你路由器 黑色",heafy:"55g/个",quantity:1,price:{whole:24,smallNum:".80"}},{id:3,nanme:"三只松鼠",imgSrc:"https://img14.360buyimg.com/n7/jfs/t2986/319/1987392477/286042/849fc10a/57959f45N9bb8c2ef.jpg",text:"三只松鼠_坚果组合630g零食夏威夷果碧根果手剥巴旦木共3袋",quantity:1,price:{whole:65,smallNum:".90"}},{id:4,nanme:"进口牛奶",imgSrc:"https://img14.360buyimg.com/n7/jfs/t2158/251/1732012761/195256/df943f18/56da7573Nd4a6b429.jpg",text:"德国 进口牛奶 欧德堡（Oldenburger）全脂 纯牛奶200ml×24盒/箱",quantity:1,price:{whole:88,smallNum:".00"}},{id:5,nanme:"无线网卡",imgSrc:"https://img14.360buyimg.com/n7/jfs/t2041/5/1366463707/147931/c1bb7056/56581dd3N96715279.jpg",text:"华硕（ASUS）USB-AC55 1300M AC双频 低辐射 USB 3.0无线网卡 （带USB3.0延长线）",quantity:1,price:{whole:229,smallNum:".00"}}],t.Buy=function(e){a(e),o(e),n+=e.quantity,t.totalquantity=n,console.log(n)},t.footerHide=!0;var i=0,n=0;t.subtract=function(e){var a=e;if(-1!=a){var o=t.goods[e];o.quantity>1?(t.goods[a].quantity--,n--,t.totalquantity=n):confirm("是否从购物车删除该商品?")&&t.remove(e),i+=Number(o.price.whole+o.price.smallNum)*t.goods[a].quantity,t.calculate=i.toFixed(2)}},t.add=function(e){var a=e;-1!=a&&(t.goods[a].quantity++,n++,t.totalquantity=n,i+=Number(item.price.whole+item.price.smallNum)*t.goods[a].quantity,t.calculate=i.toFixed(2))},t.toggleEdit="编辑",t.checkedVar=!0,t.allVar=!0,t.footerTwoBtn=!0,t.calculates=!0,t.Edit=function(){"编辑"===t.toggleEdit?t.toggleEdit="完成":t.toggleEdit="编辑",t.calculates=!t.calculates,t.footerTwoBtn=!t.footerTwoBtn,t.checkedVar=!t.checkedVar,t.allVar=!t.allVar},t.delShopcar=function(){t.allVar&&e.confirm({title:"警告",template:"<h4>是否确认将全部商品删除?</h4>",cancelText:"取消",okText:"确认",okType:"assertive"}).then(function(e){e?(console.log("You are sure"),$("ion-item").remove(),t.footerHide=!0,t.footerTwoBtn=!0,t.calculates=!0,t.toggleEdit="编辑",$(".header").hide(),$(".jingdong").hide(),$(".shop-car").show(),i=0):console.log("You are not sure")})},t.allSelect=function(){t.checkedVar=!t.checkedVar},t.remove=function(e){-1!=e&&t.goods.splice(e,1)}});